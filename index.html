<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>5ã•ã„ã‚€ã‘â˜†ã»ã„ããˆã‚“ ãã¿ã‚ã‘ ã—ã‚“ã ã‚“</title>
  <meta name="description" content="5ã•ã„ã§ã‚‚ã§ãã‚‹ 10ã‚‚ã‚“ã® ãŸã®ã—ã„ ãã¿ã‚ã‘ã—ã‚“ã ã‚“ï¼ã“ãŸãˆã‚‹ã¨ã€â—¯â—¯ï¼ˆã„ã‚ï¼‰ãã¿ã€ãŒã‚ã‹ã£ã¦ã€ã™ãã‚·ã‚§ã‚¢ã§ãã‚‹ã‚ˆã€‚" />
  <meta name="theme-color" content="#ffdfe9" />
  <!-- OGP / Twitter -->
  <meta property="og:title" content="5ã•ã„ã‚€ã‘â˜†ã»ã„ããˆã‚“ ãã¿ã‚ã‘ ã—ã‚“ã ã‚“" />
  <meta property="og:description" content="10ã‚‚ã‚“ ã“ãŸãˆã‚‹ã ã‘ï¼ãã¿ã®ã€â—¯â—¯ï¼ˆã„ã‚ï¼‰ãã¿ã€ã‚’ ã¯ã£ã‘ã‚“ï¼" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <!-- JSON-LDï¼ˆç°¡æ˜“ï¼‰ -->
  <script type="application/ld+json">{
    "@context":"https://schema.org","@type":"Quiz","name":"ã»ã„ããˆã‚“ ãã¿ã‚ã‘ ã—ã‚“ã ã‚“","about":"5ã•ã„å‘ã‘è¨ºæ–­","audience":{"@type":"PeopleAudience","suggestedMinAge":5}}
  </script>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#FFF7FB;--card:#fff;--ink:#333;--muted:#666;--accent:#FF6FA5;--accent2:#8ED1FC;--radius:20px;--shadow:0 6px 20px rgba(0,0,0,.08);
      --fs-title:clamp(22px,6vw,30px);--fs-base:clamp(18px,3.8vw,22px);--fs-btn:clamp(18px,4vw,22px);
      --bg1:#ffe0ef; --bg2:#e1f1ff;
    }
    *{box-sizing:border-box}

    body{
      margin:0;font-family:'Kosugi Maru',"Hiragino Maru Gothic ProN","Noto Sans JP",sans-serif;
      background:
        radial-gradient(1200px 600px at 20% -10%, var(--bg1), transparent),
        radial-gradient(900px 500px at 120% 20%, var(--bg2), transparent),
        var(--bg);
      color:var(--ink);
      transition: background 600ms ease;
    }
    /* å½©ã‚Šãƒãƒ–ãƒ« */
    .bubbles{position:fixed;inset:0;pointer-events:none;z-index:-1;overflow:hidden}
    .bubble{position:absolute;border-radius:999px;filter:blur(2px);opacity:.6;animation:float 10s ease-in-out infinite alternate}
    .b1{background:#ffd2e3;width:180px;height:180px;left:-40px;top:40px;animation-duration:12s}
    .b2{background:#cfeaff;width:220px;height:220px;right:-60px;top:120px}
    .b3{background:#fff1b8;width:140px;height:140px;left:30%;bottom:-40px;animation-duration:14s}
    .b4{background:#c9f3c9;width:160px;height:160px;right:20%;bottom:-60px}
    @keyframes float{to{transform:translateY(-20px) translateX(10px)}}

    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 80px}
    .app{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    header{display:flex;align-items:center;gap:12px;padding:16px 18px;background:linear-gradient(90deg,#ffb8d1,#b6dfff)}
    h1{margin:0;font-size:var(--fs-title);line-height:1.2}

    .screen{padding:16px}
    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;margin:12px 0}
    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center}
    .grid-2{display:grid;gap:12px}
    @media(min-width:720px){.grid-2{grid-template-columns:1fr 1fr}}

    .btn{border:0;border-radius:16px;padding:14px 16px;font-size:var(--fs-btn);cursor:pointer;box-shadow:var(--shadow);background:#fff;transition:transform .08s ease, box-shadow .2s ease}
    .btn:active{transform:translateY(1px) scale(.98)}
    .btn.primary{background:linear-gradient(90deg,#ff6fa5,#ff9fc0);color:#fff}
    .btn.ghost{background:#fff;border:2px solid #eee}
    .btn.icon{display:inline-flex;align-items:center;gap:10px}

    .bar{height:12px;background:#f2f2f2;border-radius:999px;overflow:hidden}
    .bar-fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .35s cubic-bezier(.2,.8,.2,1)}

    .q-title{font-size:clamp(20px,5vw,26px);margin:12px 0 10px}
    .choices{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:640px){.choices{grid-template-columns:1fr 1fr}}
    .choice{display:flex;gap:12px;align-items:center;justify-content:flex-start;text-align:left;border:2px solid #eee;background:#fff;padding:16px;border-radius:16px;font-size:clamp(18px,4.5vw,22px);transition:transform .06s ease, box-shadow .2s ease, background-color .2s ease}
    .choice .emoji{font-size:26px;transition:transform .2s ease}
    .choice:active{transform:scale(.98)}
    .choice:hover .emoji{transform:translateY(-2px)}
    .choice[data-color="red"]{border-color:#ffd2e1}
    .choice[data-color="blue"]{border-color:#cfeaff}
    .choice[data-color="yellow"]{border-color:#fff1b8}
    .choice[data-color="green"]{border-color:#c9f3c9}
    .choice[data-color="pink"]{border-color:#f1dcff}
    .choice[data-color="red"]:hover{background:#fff2f7}
    .choice[data-color="blue"]:hover{background:#f2f9ff}
    .choice[data-color="yellow"]:hover{background:#fff8da}
    .choice[data-color="green"]:hover{background:#f2fff2}
    .choice[data-color="pink"]:hover{background:#fbf5ff}

    .result{text-align:center;display:grid;gap:14px;position:relative}
    .tag{display:inline-block;padding:10px 14px;border-radius:999px;font-weight:700;color:#fff;animation:pop .4s ease}
    .desc{font-size:clamp(18px,4vw,22px)}
    .mini{font-size:14px;color:var(--muted)}

    .mascot{width:min(300px, 65vw);max-height:360px;object-fit:contain;margin:10px auto;display:block;transition:transform .4s ease}
    .mascot.play{transform:translateY(-2px)}

    /* ç´™å¹é›ª */
    .confetti{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .piece{position:absolute;width:10px;height:16px;border-radius:3px;opacity:.9;animation:fall 1.8s linear forwards}
    @keyframes fall{to{transform:translateY(110%) rotate(540deg);opacity:.7}}

    @keyframes pop{0%{transform:scale(.8);opacity:.0}100%{transform:scale(1);opacity:1}}
  </style>
</head>
<body>
  <div class="bubbles" aria-hidden="true">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
    <div class="bubble b3"></div>
    <div class="bubble b4"></div>
  </div>
  <div class="wrap">
    <div class="app" role="application" aria-label="5ã•ã„ ã‚€ã‘ ã—ã‚“ã ã‚“">
      <header>
        <h1>5ã•ã„ã‚€ã‘â˜†ã»ã„ããˆã‚“ ãã¿ã‚ã‘ ã—ã‚“ã ã‚“</h1>
      </header>

      <!-- Intro -->
      <div class="screen intro" id="screen-intro">
        <div class="card">
          <p style="font-size:var(--fs-base)">ãƒœã‚¿ãƒ³ã‚’ ã½ã¡ã½ã¡ï¼<br>10ã‚‚ã‚“ ã“ãŸãˆã‚‹ã ã‘ã§ã€<strong>ãã¿ã ã‘ã®ã€â—¯â—¯ï¼ˆã„ã‚ï¼‰ãã¿ã€</strong>ãŒ ã§ã¦ãã‚‹ã‚ˆã€‚<br>ãƒ‰ã‚­ãƒ‰ã‚­ ã‚ãã‚ãã€ãªã«ãã¿ã‹ãªï¼Ÿ</p>
          <div class="grid-2">
            <button class="btn primary icon" id="startBtn">â–¶ï¸ ã¯ã˜ã‚ã‚‹</button>
            <div class="controls">
              <button class="btn ghost" id="contrastBtn">ğŸŒ“ ã¿ã‚„ã™ã</button>
            </div>
          </div>
        </div>
        <div class="card mini">â€» ã“ã®ã‚µã‚¤ãƒˆã¯ ã“ãŸãˆã‚’ ã‚µãƒ¼ãƒãƒ¼ã« ãŠãã‚Šã¾ã›ã‚“ã€‚ã‚ã‚“ã—ã‚“ã—ã¦ ã‚ãã¹ã¾ã™ã€‚</div>
      </div>

      <!-- Quiz -->
      <div class="screen" id="screen-quiz" hidden>
        <div class="card">
          <div class="bar" aria-hidden="true"><div class="bar-fill" id="bar"></div></div>
          <div class="q-title" id="qTitle">Q1</div>
          <div class="choices" id="choices" role="group" aria-label="ã›ã‚“ãŸãã—"></div>
        </div>
      </div>

      <!-- Result -->
      <div class="screen" id="screen-result" hidden>
        <div class="card result">
          <div class="confetti" id="confetti"></div>
          <div id="tag" class="tag">â—¯â—¯ãã¿</div>
          <!-- â–¼â–¼ ã“ã“ã‚’ç”»åƒè¡¨ç¤ºã«å·®ã—æ›¿ãˆ â–¼â–¼ -->
          <img id="mascotImg" class="mascot" alt="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼" />
          <!-- â–²â–² å·®ã—æ›¿ãˆçµ‚ã‚ã‚Š â–²â–² -->
          <div id="resultTitle" class="q-title">ãã¿ã¯ â€¦</div>
          <div id="resultDesc" class="desc"></div>
          <div id="parentTip" class="mini"></div>
          <div class="controls" style="justify-content:center">
            <button class="btn primary" id="shareBtn">ğŸ“£ ã‚·ã‚§ã‚¢</button>
            <button class="btn ghost" id="shareX">ğ• ãƒã‚¹ãƒˆ</button>
            <button class="btn ghost" id="shareLine">LINE</button>
            <button class="btn ghost" id="openInstaBtn">ğŸ“· Instagramã‚’ã²ã‚‰ã</button>
            <button class="btn ghost" id="saveCardBtn">ğŸ–¼ ã‚«ãƒ¼ãƒ‰ä¿å­˜</button>
            <button class="btn ghost" id="mbtiToggleBtn">ğŸ” MBTIã²ã¿ã¤</button>
            <button class="btn ghost" id="restartBtn">â†º ã‚‚ã†ã„ã¡ã©</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// ===== ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆã”æŒ‡å®šã©ãŠã‚Šåˆã‚ã›ã¾ã™ï¼‰ =====
// ä¾‹ï¼š/img/mascot_red.png ãªã©ã€ã‚µã‚¤ãƒˆå…¬é–‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¦ãã ã•ã„ã€‚
const GROUPS={
  red:{name:'ã‚ã‹ãã¿',color:'#FF6FA5',text:'#fff',
       desc:'ã‚„ã£ãŸãƒ¼ï¼ãã¿ã¯ <ã¤ã‚ˆãã¦ ã’ã‚“ã> ã® ã‚ã‹ã€‚ã‚„ã£ã¦ã¿ã‚‹ãƒ‘ãƒ¯ãƒ¼ãŒ ã¨ã¾ã‚‰ãªã„ï¼',
       adult:'å¤–å‘ï¼ˆEï¼‰ã¨åˆ¤æ–­ï¼ˆJï¼‰ãŒã¤ã‚ˆã‚ã€‚ã¿ã‚“ãªã‚’ãã„ã£ã¨ã¾ã¨ã‚ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼æ°—è³ªã€‚è€ƒãˆã‚‹ã‚ˆã‚Šå…ˆã«ã¾ãšã‚„ã£ã¦ã¿ã‚‹â€œãƒ‘ãƒ¯ãƒ¼ä¿‚â€ã€‚çŸ­ã„åˆå›³ï¼ˆ3ãƒ»2ãƒ»1ï¼‰ã§åˆ‡ã‚Šæ›¿ãˆã‚„ã™ãã€è¡Œäº‹å‰ã«ãªã‚‹ã¨é›†ä¸­åŠ›ãŒãã‚“ã¨ä¸ŠãŒã‚‹ã‚¿ã‚¤ãƒ—ã€‚',tip:'ã‚ãã¶å‰ã«ã€Œ3ãƒ»2ãƒ»1ã§ãŠã‚ã‚Šã€ã®åˆå›³â—',
       bg1:'#ffcae0', bg2:'#fff1f7', img:'img/mascot_red.png'},
  blue:{name:'ã‚ãŠãã¿',color:'#8ED1FC',text:'#103b5b',
       desc:'ã—ãšã‹ã« ã˜ã£ãã‚Šã€‚ã‚ˆãã¿ã¦ ã‹ã‚“ãŒãˆã‚‹ ã¡ãˆã‚‚ã¡ï¼',
       adult:'å†…å‘ï¼ˆIï¼‰ã¨æ€è€ƒï¼ˆTï¼‰å¯„ã‚Šã€‚ã¾ãšã¯ã‚ˆãè¦‹ã¦ã€é™ã‹ã«è€ƒãˆã¦ã‹ã‚‰è¡Œå‹•ã™ã‚‹å‚è¬€ã‚¿ã‚¤ãƒ—ã€‚ãƒ«ãƒ¼ãƒ«ã‚„æ‰‹é †ãŒè¦‹ãˆã‚‹ã¨å®‰å¿ƒã—ã€ä¸å¯§ã§æ­£ç¢ºã€‚å‘¨ã‚ŠãŒã‚ã‚ã¦ã¦ã„ã‚‹æ™‚ã»ã©è½ã¡ç€ã„ã¦åŠ©ã‘èˆŸã‚’å‡ºã›ã‚‹ã€‚',tip:'ã›ã‹ã•ãªã„å£°ã‹ã‘ã€‚ã˜ã¶ã‚“ã®ãƒšãƒ¼ã‚¹å¤§åˆ‡',
       bg1:'#d7eeff', bg2:'#eef8ff', img:'img/mascot_blue.png'},
  yellow:{name:'ãã„ã‚ãã¿',color:'#FFE066',text:'#5b4e00',
       desc:'ãƒ”ã‚«ãƒƒï¼ã²ã‚‰ã‚ã ã ã„ã™ãã€‚ã‚ãã‚ã ã•ãŒã—åäººï¼',
       adult:'ç›´æ„Ÿï¼ˆNï¼‰ã¨çŸ¥è¦šï¼ˆPï¼‰å¯„ã‚Šã€‚ã²ã‚‰ã‚ãã§ä¸–ç•ŒãŒåºƒãŒã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ¡ãƒ¼ã‚«ãƒ¼ã€‚äºˆå®šã¯ã‚†ã‚‹ã‚ãŒã¯ã‹ã©ã‚Šã€ä½“é¨“ã‹ã‚‰å­¦ã¶ã®ãŒå¾—æ„ã€‚æ–°ã—ã„éŠã³æ–¹ã‚’ã™ãè¦‹ã¤ã‘ã¦å ´ã‚’æ˜ã‚‹ãã™ã‚‹ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ã€‚',tip:'ãã‚Šã‹ãˆã‚µã‚¤ãƒ³ï¼ˆæ­Œãƒ»ãƒ™ãƒ«ï¼‰ã§â—',
       bg1:'#ffe996', bg2:'#fff7cd', img:'img/mascot_yellow.png'},
  green:{name:'ã¿ã©ã‚Šãã¿',color:'#A0E7A0',text:'#0b3d0b',
       desc:'ãµã‚ã£ã¨ ã‚ã£ãŸã‹ã€‚ã¿ã‚“ãªã® ã“ã“ã‚ã‚’ ãªã§ã‚‹ ã„ã‚„ã—ã®æ‰‹ã€‚',
       adult:'æ„Ÿæƒ…ï¼ˆFï¼‰å¯„ã‚Šï¼‹ã‚„ã‚„å†…å‘ï¼ˆIï¼‰ã€‚æ°—æŒã¡ã®ã‚¢ãƒ³ãƒ†ãƒŠãŒé«˜æ„Ÿåº¦ã§ã€ã ã‚Œã‹ã®â€œã†ã‚Œã—ã„ãƒ»ã‹ãªã—ã„â€ã«ã™ãæ°—ã¥ã‘ã‚‹ãƒ’ãƒ¼ãƒ©ãƒ¼ã€‚é™ã‹ãªç’°å¢ƒã§åŠ›ã‚’ç™ºæ®ã—ã€å®‰å¿ƒã§ãã‚‹äººã‚„ç‰©ãŒãã°ã«ã‚ã‚‹ã¨ã‚°ãƒ³ã¨ä¼¸ã³ã‚‹ã€‚',tip:'ä¼‘ã‘ã„ã¨ ã™ããª ã¬ã„ãã‚‹ã¿â—',
       bg1:'#dcffe0', bg2:'#f3fff4', img:'img/mascot_green.png'},
  pink:{name:'ã‚‚ã‚‚ãã¿',color:'#C9A0FF',text:'#3c1f63',
       desc:'ã‚­ãƒ©ãƒªâ˜† ã¤ãã‚‹ã® ã¦ã‚“ã•ã„ã€‚ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ ã‹ãŸã¡ã« ã§ãã‚‹ã‚ˆï¼',
       adult:'æ„Ÿè¦šï¼ˆSï¼‰ã¨æ„Ÿæƒ…ï¼ˆFï¼‰å¯„ã‚Šã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã€‚æ‰‹ã–ã‚ã‚Šãƒ»è‰²ãƒ»éŸ³ã¨ã„ã£ãŸäº”æ„Ÿã®ä¸–ç•ŒãŒè±Šã‹ã§ã€ä½œå“ã¥ãã‚Šã«æ²¡é ­ã§ãã‚‹ã€‚å°ã•ãªã“ã ã‚ã‚ŠãŒé­…åŠ›ã€‚ã§ããŸä½œå“ã‚’è¨€è‘‰ã§å…·ä½“çš„ã«ã»ã‚ã‚‰ã‚Œã‚‹ã¨è‡ªå·±åŠ¹åŠ›æ„ŸãŒæ€¥ä¸Šæ˜‡ã€‚',tip:'ä½œå“ã‚’ã»ã‚ã‚‹ã¨ ã‚„ã‚‹æ°—UPï¼',
       bg1:'#e9dbff', bg2:'#f6efff', img:'img/mascot_pink.png'}
};

// ===== 4æŠÃ—10å•ï¼ˆçœç•¥ã›ãšç¾çŠ¶ç¶­æŒï¼‰ =====
const QUESTIONS=[
 {q:'ã‚ã•ã€ãƒãƒãŒã€Œã¯ã‚„ãã€œï¼ã€ã¨ ã„ã£ãŸã‚‰ï¼Ÿ',choices:[
  {t:'ã™ã ãƒ€ãƒƒã‚·ãƒ¥ï¼',e:'ğŸƒ',color:'red'},
  {t:'ã¡ã‚‡ã£ã¨ ã‹ã‚“ãŒãˆã‚‹',e:'ğŸ¤”',color:'blue'},
  {t:'ã€Œã‚ã¨ ã™ã“ã—ã€œã€',e:'ğŸ§¸',color:'yellow'},
  {t:'ã¸ã‚“ãŒãŠã§ ã”ã¾ã‹ã™',e:'ğŸ˜œ',color:'pink'}]},
 {q:'ã¨ã‚‚ã ã¡ãŒ ãªã„ã¦ã„ãŸã‚‰ï¼Ÿ',choices:[
  {t:'ã‚ˆã—ã‚ˆã— ã—ã¦ã‚ã’ã‚‹',e:'ğŸ¤—',color:'green'},
  {t:'ã›ã‚“ã›ã„ã‚’ ã‚ˆã¶',e:'ğŸ‘©â€ğŸ«',color:'blue'},
  {t:'ã„ã£ã—ã‚‡ã« ãªã„ã¡ã‚ƒã†',e:'ğŸ˜­',color:'yellow'},
  {t:'ã¸ã‚“ãŒãŠã§ ã‚ã‚‰ã‚ã›ã‚‹',e:'ğŸ¤£',color:'red'}]},
 {q:'ãˆã‚“ãããƒã‚¹ã§ ã©ã†ã™ã‚‹ï¼Ÿ',choices:[
  {t:'ãã¨ã‚’ ãšã£ã¨ ã¿ã‚‹',e:'ğŸ‘€',color:'blue'},
  {t:'ã¨ãªã‚Šã¨ ãŠã—ã‚ƒã¹ã‚Š',e:'ğŸ—£ï¸',color:'red'},
  {t:'ã¿ã¤ã‘ãŸ ã‚‚ã®ã‚’ ã»ã†ã“ã',e:'ğŸ”',color:'yellow'},
  {t:'ã¼ãƒ¼ã£ã¨ ã‚†ã‚ã® ã›ã‹ã„',e:'ğŸ’­',color:'pink'}]},
 {q:'ã™ããª ã‚ãã³ã¯ï¼Ÿ',choices:[
  {t:'ãŠã«ã”ã£ã“',e:'ğŸ‘Ÿ',color:'red'},
  {t:'ã¤ã¿ã',e:'ğŸ§±',color:'blue'},
  {t:'ãŠãˆã‹ã',e:'ğŸ¨',color:'pink'},
  {t:'ãƒ«ãƒ¼ãƒ« ã¤ãã‚‹',e:'ğŸ“',color:'yellow'}]},
 {q:'ã€Œã™ãã€ãª ã“ãŒ ã¹ã¤ã® ã“ ã¨ ã‚ãã‚“ã§ãŸã‚‰ï¼Ÿ',choices:[
  {t:'ã„ã£ã—ã‚‡ã« ã¾ãœã¦ã‚‚ã‚‰ã†',e:'ğŸ¤',color:'red'},
  {t:'ã¹ã¤ã® ã‚ãã³ ã•ãŒã™',e:'ğŸ§­',color:'blue'},
  {t:'ã‚„ãã‚‚ã¡ â†’ ãˆã« ã‹ã',e:'ğŸ–ï¸',color:'pink'},
  {t:'ã˜ã¶ã‚“ãŒ ã—ã‹ãï¼ˆã—ãã‚‹ï¼‰',e:'ğŸ¤',color:'yellow'}]},
 {q:'ã“ã†ã•ã ã‚¿ã‚¤ãƒ ',choices:[
  {t:'ã™ã ã¤ãã‚‹',e:'âœ‚ï¸',color:'red'},
  {t:'ã©ã† ã¤ãã‚‹ã‹ ã‹ã‚“ãŒãˆã‚‹',e:'ğŸ“',color:'blue'},
  {t:'ãã‚‰ãã‚‰ ã„ã£ã±ã„',e:'âœ¨',color:'pink'},
  {t:'ã ã‚ŒãŒ ã˜ã‚‡ã†ãšã‹ ãã«ãªã‚‹',e:'ğŸ‘€',color:'yellow'}]},
 {q:'ã‚ãŸã‚‰ã—ã„ ã‚ãã ãŒ ããŸï¼',choices:[
  {t:'ã™ã ã‚„ã‚‹',e:'ğŸ¢',color:'red'},
  {t:'ã¨ã‚‚ã ã¡ã‚’ ã¿ã‚‹',e:'ğŸ‘€',color:'blue'},
  {t:'ã„ã¤ã‚‚ã® ã™ã¹ã‚Šã ã„',e:'ğŸ›',color:'green'},
  {t:'ã¸ã‚“ãª ã‚ãã³ã‹ãŸ ã‚’ ã‹ã‚“ãŒãˆã‚‹',e:'ğŸ’¡',color:'pink'}]},
 {q:'ãŠã²ã‚‹ã­ ã‚¿ã‚¤ãƒ ',choices:[
  {t:'ã™ã ã­ã‚€ã‚‹',e:'ğŸ’¤',color:'blue'},
  {t:'ã¬ã„ãã‚‹ã¿ ã¨ ã„ã£ã—ã‚‡',e:'ğŸ§¸',color:'green'},
  {t:'ã€Œã¾ã  ã­ãªã„ï¼ã€',e:'ğŸ™Œ',color:'red'},
  {t:'ã‚ãŸã¾ã§ ãŠã¯ãªã— ã¤ãã£ã¦ ã­ã‚€ã‚Œãªã„',e:'ğŸ“–',color:'pink'}]},
 {q:'ãŠã‹ãŸã¥ã‘ ã® ãƒ™ãƒ«ï¼',choices:[
  {t:'ã‚ˆãƒ¼ã„ ã©ã‚“ï¼ã§ ã‹ãŸã¥ã‘',e:'ğŸ',color:'red'},
  {t:'ãã‚Œã„ã« ãªã‚‰ã¹ã‚‹',e:'ğŸ§¼',color:'pink'},
  {t:'ã¨ã‚Šã‚ãˆãš ã¤ã‚ã“ã‚€',e:'ğŸ“¦',color:'yellow'},
  {t:'ã¿ã¦ã‚‹ ã ã‘',e:'ğŸ‘€',color:'blue'}]},
 {q:'ã‚€ãšã‹ã—ã„ ãŠã—ã”ã¨ ã‚’ ã ã•ã‚ŒãŸã‚‰ï¼Ÿ',choices:[
  {t:'ã‚„ã£ã¦ã¿ã‚‹',e:'âœï¸',color:'red'},
  {t:'ã‘ã„ã‹ã ã—ã¦ã‹ã‚‰',e:'ğŸ“’',color:'blue'},
  {t:'ãƒãƒã« ãã',e:'ğŸ‘©â€ğŸ‘¦',color:'green'},
  {t:'ã—ã‚‰ã¹ã¦ ã¿ã‚‹',e:'ğŸ”',color:'yellow'}]}
];

let step=0;const score={red:0,blue:0,yellow:0,green:0,pink:0};
const intro=document.getElementById('screen-intro');
const quiz=document.getElementById('screen-quiz');
const result=document.getElementById('screen-result');
const qTitle=document.getElementById('qTitle');
const choicesEl=document.getElementById('choices');
const bar=document.getElementById('bar');
let showMBTI=false;

function updateProgress(){bar.style.width=Math.round((step/QUESTIONS.length)*100)+'%'}
function renderQuestion(){const item=QUESTIONS[step];qTitle.textContent=`Q${step+1}. ${item.q}`;choicesEl.innerHTML='';item.choices.forEach(c=>{const btn=document.createElement('button');btn.className='choice';btn.setAttribute('data-color',c.color);btn.innerHTML=`<span class="emoji">${c.e}</span> <span>${c.t}</span>`;btn.addEventListener('click',()=>choose(c.color));choicesEl.appendChild(btn)});updateProgress()}
function choose(color){score[color]++;step++;if(step<QUESTIONS.length){renderQuestion()}else{showResult()}}
function pickGroup(){return Object.entries(score).sort((a,b)=>b[1]-a[1])[0][0]}
function applyTheme(g){document.documentElement.style.setProperty('--accent', g.color);document.documentElement.style.setProperty('--bg1', g.bg1);document.documentElement.style.setProperty('--bg2', g.bg2)}
function resultText(g){return g.desc + (showMBTI?` ï¼ ãŠã¨ãªã‚€ã‘: ${g.adult}`:'')}

function confettiBurst(color){const wrap=document.getElementById('confetti');wrap.innerHTML='';const colors=[color,'#ffffff','#ffd966','#8ed1fc','#c9a0ff','#a0e7a0'];const N=80;const w=wrap.clientWidth||300;for(let i=0;i<N;i++){const d=document.createElement('div');d.className='piece';d.style.left=Math.random()*w+'px';d.style.top=(-20-Math.random()*40)+'px';d.style.background=colors[Math.floor(Math.random()*colors.length)];d.style.transform=`rotate(${Math.random()*180}deg)`;d.style.animationDuration=(1.3+Math.random()*0.9)+'s';wrap.appendChild(d)}setTimeout(()=>{wrap.innerHTML=''},2200)}
function playSE(){try{const ctx=new (window.AudioContext||window.webkitAudioContext)();const now=ctx.currentTime;const freqs=[880,1174,1568];freqs.forEach((f,i)=>{const o=ctx.createOscillator();const g=ctx.createGain();o.type='sine';o.frequency.value=f;o.connect(g);g.connect(ctx.destination);g.gain.setValueAtTime(0.0001,now+i*0.01);g.gain.exponentialRampToValueAtTime(0.2,now+i*0.01+0.02);g.gain.exponentialRampToValueAtTime(0.0001,now+i*0.01+0.25);o.start(now+i*0.01);o.stop(now+i*0.01+0.26)})}catch(e){} }

function showResult(){intro.hidden=true;quiz.hidden=true;result.hidden=false;const key=pickGroup();const g=GROUPS[key];const tag=document.getElementById('tag');tag.textContent=g.name;tag.style.background=g.color;tag.style.color=g.text;document.getElementById('resultTitle').textContent=`${g.name} ãŒ ã§ãŸã‚ˆï¼`;document.getElementById('resultDesc').textContent=resultText(g);document.getElementById('parentTip').textContent=`ã»ã”ã—ã‚ƒãƒ¡ãƒ¢: ${g.tip}`;applyTheme(g);confettiBurst(g.color);playSE();
  const imgEl=document.getElementById('mascotImg'); imgEl.src=g.img; imgEl.alt=g.name+" ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼"; imgEl.classList.add('play');
}

// PNGã‚«ãƒ¼ãƒ‰ä¿å­˜ï¼ˆ1080x1920ï¼‰â€” ç”»åƒã‚’æãè¾¼ã‚€
function saveCard(){const key=pickGroup();const g=GROUPS[key];const w=1080,h=1920;const canvas=document.createElement('canvas');canvas.width=w;canvas.height=h;const ctx=canvas.getContext('2d');const grad=ctx.createLinearGradient(0,0,w,h);grad.addColorStop(0,g.bg1||'#ffe4f1');grad.addColorStop(1,g.bg2||'#e9f7ff');ctx.fillStyle=grad;ctx.fillRect(0,0,w,h);ctx.fillStyle='#333';ctx.font='bold 64px "Kosugi Maru", sans-serif';ctx.fillText('ãã¿ã‚ã‘ ã—ã‚“ã ã‚“',60,120);ctx.fillStyle=g.color;roundRect(ctx,60,160,360,100,50,true,false);ctx.fillStyle=g.text;ctx.font='bold 56px "Kosugi Maru", sans-serif';ctx.fillText(g.name,90,230);
  // ç”»åƒã‚’èª­ã¿è¾¼ã‚“ã§æç”»
  const img=new Image(); img.crossOrigin='anonymous'; img.src=g.img;
  img.onload=()=>{ const size=520; ctx.drawImage(img, w-60-size, 140, size, size); drawTexts(); download(); };
  img.onerror=()=>{ drawFrame(); drawTexts(); download(); };
  function drawFrame(){ctx.fillStyle='#fff';ctx.strokeStyle='#eee';roundRect(ctx,w-620,140,520,520,28,true,true)}
  function drawTexts(){ctx.fillStyle='#333';ctx.font='48px "Kosugi Maru", sans-serif';wrapText(ctx,resultText(g),60,360,560,64);ctx.fillStyle='#666';ctx.font='36px sans-serif';ctx.fillText('#ãã¿ã‚ã‘ã—ã‚“ã ã‚“',60,h-80)}
  function download(){const a=document.createElement('a');a.href=canvas.toDataURL('image/png');a.download=`${g.name}_ã‚«ãƒ¼ãƒ‰.png`;a.click()}
}
function roundRect(ctx,x,y,w,h,r,fill,stroke){if(w<2*r)r=w/2;if(h<2*r)r=h/2;ctx.beginPath();ctx.moveTo(x+r,y);ctx.arcTo(x+w,y,x+w,y+h,r);ctx.arcTo(x+w,y+h,x,y+h,r);ctx.arcTo(x,y+h,x,y,r);ctx.arcTo(x,y,x+w,y,r);ctx.closePath();if(fill)ctx.fill();if(stroke)ctx.stroke()}
function wrapText(ctx,text,x,y,maxW,lineH){const chars=text.split('');let line='';for(let i=0;i<chars.length;i++){const test=line+chars[i];if(ctx.measureText(test).width>maxW){ctx.fillText(line,x,y);line=chars[i];y+=lineH}else{line=test}}ctx.fillText(line,x,y)}

// å…±æœ‰
function webShare(){const key=pickGroup();const g=GROUPS[key];const text=`ã‚ãŸã—ã¯ã€Œ${g.name}ã€ã‚¿ã‚¤ãƒ—ï¼ #ãã¿ã‚ã‘ã—ã‚“ã ã‚“`;const url=location.href.split('#')[0];if(navigator.share){navigator.share({title:'ãã¿ã‚ã‘ ã—ã‚“ã ã‚“',text,url}).catch(()=>{})}else{window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`,'_blank')}}
function shareX(){const g=GROUPS[pickGroup()];const text=`ã‚ãŸã—ã¯ã€Œ${g.name}ã€ã‚¿ã‚¤ãƒ—ï¼ #ãã¿ã‚ã‘ã—ã‚“ã ã‚“`;const url=location.href;window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`,'_blank')}
function shareLine(){const g=GROUPS[pickGroup()];const text=`ã‚ãŸã—ã¯ã€Œ${g.name}ã€ã‚¿ã‚¤ãƒ—ï¼ #ãã¿ã‚ã‘ã—ã‚“ã ã‚“ ${location.href}`;window.open(`https://line.me/R/msg/text/?${encodeURIComponent(text)}`,'_blank')}
function openInstagram(){const deep='instagram://app';const web='https://www.instagram.com/';let opened=false;try{window.location.href=deep;opened=true}catch(e){}setTimeout(()=>{if(!opened) window.open(web,'_blank')},400)}

// ã‚¤ãƒ™ãƒ³ãƒˆ
 document.getElementById('startBtn').addEventListener('click',()=>{step=0;for(const k in score)score[k]=0;intro.hidden=true;quiz.hidden=false;result.hidden=true;renderQuestion()});
 document.getElementById('restartBtn').addEventListener('click',()=>{step=0;for(const k in score)score[k]=0;intro.hidden=false;quiz.hidden=true;result.hidden=true;bar.style.width='0%';window.scrollTo({top:0,behavior:'smooth'})});
 document.getElementById('shareBtn').addEventListener('click',webShare);
 document.getElementById('shareX').addEventListener('click',shareX);
 document.getElementById('shareLine').addEventListener('click',shareLine);
 document.getElementById('saveCardBtn').addEventListener('click',saveCard);
 document.getElementById('contrastBtn').addEventListener('click',()=>{document.body.classList.toggle('contrast')});
 document.getElementById('mbtiToggleBtn').addEventListener('click',()=>{showMBTI=!showMBTI;const key=pickGroup();const g=GROUPS[key];document.getElementById('resultDesc').textContent=resultText(g)});
 document.getElementById('openInstaBtn').addEventListener('click',openInstagram);
</script>

<!-- âœ… gtagï¼ˆGoogle Analytics 4ï¼‰: è¨ˆæ¸¬IDã‚’å·®ã—æ›¿ãˆã¦ãã ã•ã„ -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXYYYYZZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
  gtag('config', 'G-XXXXYYYYZZ');
</script>

<!-- âœ… Microsoft Clarity: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’å·®ã—æ›¿ãˆã¦ãã ã•ã„ -->
<script>
  (function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "CLARITY-PROJECT-ID");
</script>
</body>
</html>
